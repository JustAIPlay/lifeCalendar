<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生命日历</title>
    <style>
        /* 默认配色：清新蓝调 */
        :root {
            --bg: #F6F8FA;
            --past: #1E88E5;
            --future: #E6EEF6;
            --now: #FFC857;
            --gap: 2px;
            --cell-size: 8px;
        }

        /* 暖色系：温柔岁月 */
        .theme-warm {
            --bg: #FFF8F3;
            --past: #D87C56;
            --future: #F6EDEC;
            --now: #FFC857;
        }

        /* 单色高对比：极简黑白 */
        .theme-monochrome {
            --bg: #FFFFFF;
            --past: #111827;
            --future: #E6E7EB;
            --now: #FFD166;
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .input-container {
            margin-bottom: 30px;
            text-align: center;
        }

        .theme-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: 2px solid #e1e5e9;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            background-color: white;
        }

        .theme-option:hover {
            border-color: var(--past);
            transform: translateY(-1px);
        }

        .theme-option.active {
            border-color: var(--past);
            background-color: var(--past);
            color: white;
        }

        .theme-preview {
            display: flex;
            gap: 2px;
        }

        .preview-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        #birthDate {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            outline: none;
            background-color: white;
        }

        #birthDate:focus {
            border-color: var(--past);
        }

        .calendar-container {
            display: grid;
            grid-template-columns: repeat(52, var(--cell-size));
            gap: var(--gap);
            max-width: 800px;
            margin: 0 auto;
        }

        .week {
            width: var(--cell-size);
            height: var(--cell-size);
            background-color: var(--future);
            border-radius: 1px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .week:hover {
            transform: scale(1.3);
            z-index: 10;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .week.past {
            background-color: var(--past);
        }

        .week.present {
            background-color: var(--now);
            transform: scale(1.1);
            box-shadow: 0 0 0 2px rgba(255, 200, 87, 0.3);
        }

        .week.future {
            background-color: var(--future);
        }

        .info {
            margin-top: 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            font-size: 12px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="input-container">
        <div class="theme-selector">
            <div class="theme-option active" data-theme="default">
                <div class="theme-preview">
                    <div class="preview-color" style="background-color: #1E88E5;"></div>
                    <div class="preview-color" style="background-color: #FFC857;"></div>
                    <div class="preview-color" style="background-color: #E6EEF6;"></div>
                </div>
                <span>清新蓝调</span>
            </div>
            <div class="theme-option" data-theme="warm">
                <div class="theme-preview">
                    <div class="preview-color" style="background-color: #D87C56;"></div>
                    <div class="preview-color" style="background-color: #FFC857;"></div>
                    <div class="preview-color" style="background-color: #F6EDEC;"></div>
                </div>
                <span>温柔岁月</span>
            </div>
            <div class="theme-option" data-theme="monochrome">
                <div class="theme-preview">
                    <div class="preview-color" style="background-color: #111827;"></div>
                    <div class="preview-color" style="background-color: #FFD166;"></div>
                    <div class="preview-color" style="background-color: #E6E7EB;"></div>
                </div>
                <span>极简黑白</span>
            </div>
        </div>
        <input type="date" id="birthDate" placeholder="选择出生日期">
    </div>
    
    <div class="calendar-container" id="calendar"></div>
    
    <div class="info">
        <div>每个格子代表一周，总共90年（4680周）</div>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--past);"></div>
                <span>已度过</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--now);"></div>
                <span>当前周</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: var(--future);"></div>
                <span>未来</span>
            </div>
        </div>
    </div>

    <script>
        const birthDateInput = document.getElementById('birthDate');
        const calendar = document.getElementById('calendar');
        
        const WEEKS_IN_YEAR = 52;
        const YEARS = 90;
        const TOTAL_WEEKS = WEEKS_IN_YEAR * YEARS;

        function createCalendar() {
            calendar.innerHTML = '';
            
            for (let i = 0; i < TOTAL_WEEKS; i++) {
                const week = document.createElement('div');
                week.className = 'week';
                week.dataset.week = i;
                calendar.appendChild(week);
            }
        }

        function updateCalendar() {
            const birthDate = new Date(birthDateInput.value);
            if (!birthDateInput.value) return;

            const today = new Date();
            const birthTime = birthDate.getTime();
            const todayTime = today.getTime();
            
            const weeksSinceBirth = Math.floor((todayTime - birthTime) / (1000 * 60 * 60 * 24 * 7));
            
            const weeks = document.querySelectorAll('.week');
            weeks.forEach((week, index) => {
                week.className = 'week';
                if (index < weeksSinceBirth) {
                    week.classList.add('past');
                } else if (index === weeksSinceBirth) {
                    week.classList.add('present');
                } else {
                    week.classList.add('future');
                }
            });
        }

        birthDateInput.addEventListener('change', updateCalendar);

        // 主题切换功能
        const themeOptions = document.querySelectorAll('.theme-option');
        
        function switchTheme(theme) {
            // 移除所有主题类
            document.body.classList.remove('theme-warm', 'theme-monochrome');
            
            // 添加新主题类
            if (theme === 'warm') {
                document.body.classList.add('theme-warm');
            } else if (theme === 'monochrome') {
                document.body.classList.add('theme-monochrome');
            }
            
            // 更新活跃状态
            themeOptions.forEach(option => {
                option.classList.remove('active');
                if (option.dataset.theme === theme) {
                    option.classList.add('active');
                }
            });
            
            // 重新创建日历以应用新颜色
            updateCalendar();
        }
        
        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                switchTheme(option.dataset.theme);
            });
        });

        // 初始化日历
        createCalendar();
        
        // 设置默认日期为今天减去30年
        const defaultDate = new Date();
        defaultDate.setFullYear(defaultDate.getFullYear() - 30);
        birthDateInput.value = defaultDate.toISOString().split('T')[0];
        updateCalendar();
    </script>
</body>
</html>